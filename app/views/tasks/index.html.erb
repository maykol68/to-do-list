<h1 class="text-2xl font-bold mb-4">Tasks</h1>

<div class="mb-4">
  <%= form_with url: tasks_path, method: :get, local: true, class: "flex
  space-x-2" do |f| %> <%= f.text_field :search, value: params[:search],
  placeholder: "Buscar tareas...", class: "border rounded p-2 w-full" %> <%=
  f.hidden_field :filter, value: params[:filter] %> <%= f.hidden_field :sort,
  value: params[:sort] %> <%= f.submit "Buscar", class: "bg-blue-500 text-white
  px-4 py-2 rounded" %> <% end %>
</div>

<div class="mb-4 space-x-2">
  <%= link_to "Todas", tasks_path, class: "bg-gray-300 text-black px-3 py-1
  rounded" %> <%= link_to "Completadas", tasks_path(filter: "completed"),
  class:"bg-green-500 text-white px-3 py-1 rounded" %> <%= link_to "Pendientes",
  tasks_path(filter: "pending"), class: "bg-yellow-500 text-black px-3 py-1
  rounded" %>
</div>

<div class="mt-4">
  <%= link_to "Nueva Tarea", new_task_path, class: "px-4 py-2 bg-blue-600
  text-white rounded" %>
</div>

<div class="grid gap-4">
  <% @tasks.each do |task| %>
  <div class="p-4 bg-white shadow rounded">
    <h2 class="text-xl font-semibold">
      <%= link_to task.title, task_path(task), class: "text-blue-600
      hover:underline" %>
    </h2>
    <p><%= task.description %></p>
    <p class="mt-2">
      Estado: <% if task.completed %>
      <span class="text-green-600 font-semibold">✅ Completada</span>
      <% else %>
      <span class="text-yellow-600 font-semibold">⏳ Pendiente</span>
      <% end %>
    </p>
    <p><%= task.due_date%></p>

    <div class="mt-2 flex gap-2">
      <%= link_to "Edit", edit_task_path(task), class: "px-2 py-1 bg-yellow-500
      text-white rounded" %> <%= link_to "Delete", task_path(task), data: {
      turbo_method: :delete, turbo_confirm: "¿Estás seguro?" }, class: "px-2
      py-1 bg-red-500 text-white rounded" %>
    </div>
  </div>
  <% end %>
</div>
